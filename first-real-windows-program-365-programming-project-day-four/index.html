<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="john pfeiffer" />
        <meta name="copyright" content="john pfeiffer" />

<meta name="keywords" content="win32, gcc, programming, " />
        <title>First real Windows program: 365 programming project day four  · johnpfeiffer
</title>
        <!--link href="https://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css"-->
        <!--link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"-->
        <link href="https://blog.john-pfeiffer.com/theme/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="https://blog.john-pfeiffer.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
    </head>
    <body>
	<div id="content-sans-footer">
        <div class="dropdown-backdrop">

			<div class="navbar navbar-static-top">
				<div class="navbar-inner">
					<div class="container">
						<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="https://blog.john-pfeiffer.com/"><span class=site-name>johnpfeiffer</span></a>
						<div class="nav-collapse collapse">
							<ul class="nav pull-right top-menu">
								<li ><a href="https://blog.john-pfeiffer.com">Home</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/resources-for-engineering-people-managers/">Resources for Engineering (People) Managers</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/john-likes/">John Likes</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/software-engineer-favorites/">Software Engineer Favorites</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/categories.html">Categories</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/tags.html">Tags</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/archives.html">Archives</a></li>
								<li><form class="navbar-search" action="https://blog.john-pfeiffer.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span1"></div>
				<div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="https://blog.john-pfeiffer.com/first-real-windows-program-365-programming-project-day-four/"> First real Windows program: 365 programming project day four  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            <p>Windows Programming has a steep curve in the beginning as there are many things to memorize (oops I mean learn and understand) as theoretically they've created the data structures and functions to get stuff on the screen.</p>
<p>Again I've used gcc 2.95 windows port with the special command on my wndclass-hello.c source code.</p>
<p><code>gcc.exe -o %1.exe %1 -Iinclude -Llib -Wall -ansi -mwindows</code></p>
<p>The code is extra commented as this is the foundation (of understanding) for future programs.</p>
<p>Basically the windows program loops waiting for some input (e.g. clicking an OK button or the X to close the window)... in the mean time I've written a simple text in the middle.</p>
<p>Most of the code is actually just trying to setup the data structure of a window (there are many options and variations that we might use later to extend our window's functionality).</p>
<div class="highlight"><pre><span></span><code><span class="o">/*</span><span class="w"> </span><span class="n">john</span><span class="w"> </span><span class="n">pfeiffer</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="n">MS</span><span class="w"> </span><span class="n">windows</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">18</span><span class="w"> </span><span class="o">*/</span>

<span class="c1">#include            /* this includes the whole Windows API */</span>

<span class="o">/*</span><span class="w"> </span><span class="n">Declare</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="n">procedure</span><span class="w"> </span><span class="o">*/</span>
<span class="n">LRESULT</span><span class="w"> </span><span class="n">CALLBACK</span><span class="w"> </span><span class="n">WindowProcedure</span><span class="p">(</span><span class="n">HWND</span><span class="p">,</span><span class="w"> </span><span class="n">UINT</span><span class="p">,</span><span class="w"> </span><span class="n">WPARAM</span><span class="p">,</span><span class="w"> </span><span class="n">LPARAM</span><span class="p">);</span>

<span class="nb nb-Type">int</span><span class="w"> </span><span class="n">WINAPI</span><span class="w"> </span><span class="n">WinMain</span><span class="p">(</span><span class="w"> </span><span class="n">HINSTANCE</span><span class="w"> </span><span class="n">hThisInstance</span><span class="p">,</span><span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">*/</span>
<span class="w">                    </span><span class="n">HINSTANCE</span><span class="w"> </span><span class="n">hPrevInstance</span><span class="p">,</span><span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">*/</span>
<span class="w">                    </span><span class="n">LPSTR</span><span class="w"> </span><span class="n">lpszArgument</span><span class="p">,</span><span class="w">         </span><span class="o">/*</span><span class="w"> </span><span class="n">pointer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="o">*/</span>
<span class="w">                    </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">ncmdshow</span><span class="p">)</span><span class="w">               </span><span class="o">/*</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">*/</span>

<span class="p">{</span>
<span class="w">    </span><span class="n">HWND</span><span class="w"> </span><span class="n">hwnd</span><span class="p">;</span><span class="w">               </span><span class="o">/*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">MSG</span><span class="w"> </span><span class="n">messages</span><span class="p">;</span><span class="w">            </span><span class="o">/*</span><span class="w"> </span><span class="n">Messages</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">application</span><span class="w">  </span><span class="o">*/</span>
<span class="w">    </span><span class="n">WNDCLASS</span><span class="w"> </span><span class="n">wc</span><span class="p">;</span><span class="w">            </span><span class="o">/*</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">windowclass</span><span class="w"> </span><span class="o">*/</span>


<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">lpfnWndProc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WindowProcedure</span><span class="p">;</span><span class="w">         </span><span class="o">/*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">windows</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">cbClsExtra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                        </span><span class="o">/*</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">cbWndExtra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                        </span><span class="o">/*</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">hInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hThisInstance</span><span class="p">;</span><span class="w">             </span><span class="o">/*</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">hIcon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NULL</span><span class="p">;</span><span class="w">                          </span><span class="o">/*</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">icon</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">hCursor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoadCursor</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">IDC_ARROW</span><span class="p">);</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">cursor</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">hbrBackground</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HBRUSH</span><span class="p">)</span><span class="w"> </span><span class="n">GetStockObject</span><span class="p">(</span><span class="n">LTGRAY_BRUSH</span><span class="p">);</span><span class="w">   </span><span class="o">/*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">background</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">lpszMenuName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NULL</span><span class="p">;</span><span class="w">                   </span><span class="o">/*</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">menu</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">lpszClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;WindowsApp&quot;</span><span class="p">;</span><span class="w">          </span><span class="o">/*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">windows</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="o">*/</span>



<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="k">class</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">quit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">RegisterClass</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wc</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="mi">0</span><span class="w"> </span><span class="p">){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">registered</span><span class="p">,</span><span class="w"> </span><span class="n">let</span><span class="s1">&#39;s instantiate our window */</span>
<span class="w">    </span><span class="n">hwnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateWindowEx</span><span class="p">(</span>
<span class="w">           </span><span class="mi">1</span><span class="p">,</span><span class="w">                   </span><span class="o">/*</span><span class="w"> </span><span class="n">Extended</span><span class="w"> </span><span class="n">possibilites</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">variation</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="s2">&quot;WindowsApp&quot;</span><span class="p">,</span><span class="w">         </span><span class="o">/*</span><span class="w"> </span><span class="n">Classname</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="s2">&quot;Windows App&quot;</span><span class="p">,</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="n">Title</span><span class="w"> </span><span class="n">Text</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">WS_OVERLAPPEDWINDOW</span><span class="p">,</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">CW_USEDEFAULT</span><span class="p">,</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">screen</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">CW_USEDEFAULT</span><span class="p">,</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">screen</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">CW_USEDEFAULT</span><span class="p">,</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">CW_USEDEFAULT</span><span class="p">,</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">NULL</span><span class="p">,</span><span class="w">                </span><span class="o">/*</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">NULL</span><span class="p">,</span><span class="w">                </span><span class="o">/*</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">menu</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">hThisInstance</span><span class="p">,</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">Program</span><span class="w"> </span><span class="n">Instance</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="n">NULL</span><span class="w">                 </span><span class="o">/*</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">pointer</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="o">*/</span>
<span class="w">           </span><span class="p">);</span>

<span class="w">    </span><span class="n">ShowWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="n">ncmdshow</span><span class="p">);</span><span class="w">     </span><span class="o">/*</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">visible</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">screen</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">UpdateWindow</span><span class="p">(</span><span class="n">hwnd</span><span class="p">);</span><span class="w">             </span><span class="o">/*</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="o">*/</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">loop</span><span class="o">.</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">GetMessage</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="n">GetMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">messages</span><span class="p">,</span><span class="w"> </span><span class="n">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span><span class="w">           </span>
<span class="w">        </span><span class="n">TranslateMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">messages</span><span class="p">);</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="n">Translate</span><span class="w"> </span><span class="n">virtual</span><span class="o">-</span><span class="n">key</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="o">*/</span>
<span class="w">        </span><span class="n">DispatchMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">messages</span><span class="p">);</span><span class="w">  </span><span class="o">/*</span><span class="w"> </span><span class="n">Send</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">WindowProcedure</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="k">return</span><span class="o">-</span><span class="n">value</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">PostQuitMessage</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">gave</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">messages</span><span class="o">.</span><span class="n">wParam</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">DispatchMessage</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">*/</span>
<span class="n">LRESULT</span><span class="w"> </span><span class="n">CALLBACK</span><span class="w"> </span><span class="n">WindowProcedure</span><span class="p">(</span>
<span class="w">                                    </span><span class="n">HWND</span><span class="w"> </span><span class="n">hwnd</span><span class="p">,</span><span class="w">   </span><span class="o">/*</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">*/</span>
<span class="w">                                    </span><span class="n">UINT</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w">   </span><span class="o">/*</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">*/</span>
<span class="w">                                    </span><span class="n">WPARAM</span><span class="w"> </span><span class="n">wParam</span><span class="p">,</span><span class="w">  </span><span class="o">/*</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">mouse</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*/</span>
<span class="w">                                    </span><span class="n">LPARAM</span><span class="w"> </span><span class="n">lParam</span><span class="p">)</span><span class="w">  </span><span class="o">/*</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">mouse</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*/</span>
<span class="p">{</span>

<span class="w">    </span><span class="n">PAINTSTRUCT</span><span class="w"> </span><span class="n">ps</span><span class="p">;</span><span class="w">             </span><span class="o">/*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">paint</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="p">(</span><span class="n">see</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">RECT</span><span class="w"> </span><span class="n">rect</span><span class="p">;</span><span class="w">                  </span><span class="o">/*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">hold</span><span class="w"> </span><span class="n">rectangle</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="w"> </span><span class="n">coordinates</span><span class="p">)</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">HDC</span><span class="w"> </span><span class="n">hdc</span><span class="p">;</span><span class="w">                </span><span class="o">/*</span><span class="n">handle</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">DC</span><span class="w"> </span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">screen</span><span class="w"> </span><span class="o">*/</span>

<span class="w">    </span><span class="n">switch</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="w">                  </span><span class="o">/*</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">case</span><span class="w"> </span><span class="n">WM_PAINT</span><span class="p">:</span>
<span class="w">            </span><span class="n">GetClientRect</span><span class="p">(</span><span class="w"> </span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rect</span><span class="w"> </span><span class="p">);</span><span class="w">       </span><span class="o">/*</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">*/</span>
<span class="w">            </span><span class="n">hdc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BeginPaint</span><span class="p">(</span><span class="w"> </span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ps</span><span class="w"> </span><span class="p">);</span><span class="w">      </span><span class="o">/*</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="n">painting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">*/</span>
<span class="w">            </span><span class="n">DrawText</span><span class="p">(</span><span class="w"> </span><span class="n">hdc</span><span class="p">,</span><span class="w"> </span><span class="n">TEXT</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">),</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rect</span><span class="p">,</span><span class="w"> </span><span class="n">DT_CENTER</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DT_VCENTER</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DT_SINGLELINE</span><span class="p">);</span>
<span class="w">            </span><span class="o">/*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">actually</span><span class="w"> </span><span class="n">draws</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">centered</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">*/</span>
<span class="w">            </span><span class="n">EndPaint</span><span class="p">(</span><span class="w"> </span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ps</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">        </span><span class="n">case</span><span class="w"> </span><span class="n">WM_DESTROY</span><span class="p">:</span>
<span class="w">            </span><span class="n">PostQuitMessage</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w">        </span><span class="o">/*</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">WM_QUIT</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">queue</span><span class="w"> </span><span class="o">*/</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="n">default</span><span class="p">:</span><span class="w">                   </span><span class="o">/*</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">don</span><span class="s1">&#39;t deal with */</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">DefWindowProc</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">wParam</span><span class="p">,</span><span class="w"> </span><span class="n">lParam</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/*</span><span class="w"> </span>
<span class="n">typedef</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="n">tagPAINTSTRUCT</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">HDC</span><span class="w">  </span><span class="n">hdc</span><span class="p">;</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">DC</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">painting</span><span class="o">.</span><span class="w"> </span>
<span class="w">  </span><span class="n">BOOL</span><span class="w"> </span><span class="n">fErase</span><span class="p">;</span><span class="w">          </span><span class="o">//</span><span class="n">Indicates</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">background</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">erased</span><span class="o">.</span>
<span class="w">  </span><span class="n">RECT</span><span class="w"> </span><span class="n">rcPaint</span><span class="p">;</span><span class="w">         </span><span class="o">//</span><span class="n">specifies</span><span class="w"> </span><span class="n">upperleft</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lowerright</span><span class="w"> </span><span class="n">corners</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">painted</span>
<span class="w">                        </span><span class="o">//</span><span class="ow">in</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">upper</span><span class="o">-</span><span class="n">left</span><span class="w"> </span><span class="n">corner</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">area</span><span class="o">.</span><span class="w">  </span>
<span class="w">  </span><span class="n">BOOL</span><span class="w"> </span><span class="n">fRestore</span><span class="p">;</span>
<span class="w">  </span><span class="n">BOOL</span><span class="w"> </span><span class="n">fIncUpdate</span><span class="p">;</span>
<span class="w">  </span><span class="n">BYTE</span><span class="w"> </span><span class="n">rgbReserved</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">}</span><span class="n">PAINTSTRUCT</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">PPAINTSTRUCT</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>Whew, another day done.</p>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="https://blog.john-pfeiffer.com/php-is-mad-cool-with-css-365-programming-project-day-three/" title="Previous: PHP is mad cool with CSS: 365 programming project day three">PHP is mad cool with CSS: 365 programming project day three</a></li>
 
                <li class="next_article"><a href="https://blog.john-pfeiffer.com/php-and-css-on-a-radio-button-board-365-programming-project-day-five/" title="Next: PHP and CSS on a radio button board: 365 programming project day five">PHP and CSS on a radio button board: 365 programming project day five</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2010-01-18T15:05:00-08:00">Jan 18, 2010</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#programming-ref">programming</a> 
            <h4>~617 words</h4>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#gcc-ref">gcc
                    <span>7</span>
</a></li>
                <li><a href="/tags.html#win32-ref">win32
                    <span>6</span>
</a></li>
            </ul>

        </div>
        </section>
</div>
</article>
				</div>
				<div class="span1"></div>
			</div>
		</div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>