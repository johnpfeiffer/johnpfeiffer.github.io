<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="john pfeiffer" />
        <meta name="copyright" content="john pfeiffer" />

<meta name="keywords" content="alpine, linux, security, linux, " />
        <title>Alpine Linux Introduction Tutorial  · johnpfeiffer
</title>
        <!--link href="https://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css"-->
        <!--link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"-->
        <link href="https://blog.john-pfeiffer.com/theme/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="https://blog.john-pfeiffer.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
    </head>
    <body>
	<div id="content-sans-footer">
        <div class="dropdown-backdrop">

			<div class="navbar navbar-static-top">
				<div class="navbar-inner">
					<div class="container">
						<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="https://blog.john-pfeiffer.com/"><span class=site-name>johnpfeiffer</span></a>
						<div class="nav-collapse collapse">
							<ul class="nav pull-right top-menu">
								<li ><a href="https://blog.john-pfeiffer.com">Home</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/john-likes/">John Likes</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/categories.html">Categories</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/tags.html">Tags</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/archives.html">Archives</a></li>
								<li><form class="navbar-search" action="https://blog.john-pfeiffer.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span1"></div>
				<div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="https://blog.john-pfeiffer.com/alpine-linux-introduction-tutorial/"> Alpine Linux Introduction Tutorial  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#getting-started-with-alpine-linux-in-docker">Getting started with Alpine Linux in Docker</a></li>
<li><a href="#basics">Basics</a></li>
<li><a href="#package-management">Package Management</a></li>
<li><a href="#networking">Networking</a></li>
<li><a href="#compiling-c-on-alpine-linux">Compiling C on Alpine Linux</a><ul>
<li><a href="#hic">hi.c</a></li>
<li><a href="#compiling">compiling</a></li>
<li><a href="#incomplete-musl-compiler-on-alpine-linux">Incomplete musl compiler on alpine linux</a></li>
</ul>
</li>
<li><a href="#apk-add-musl-dev-wget-tar-gzip-gcc-make">apk add musl-dev wget tar gzip gcc make</a><ul>
<li><a href="#compile-go-on-alpine-linux">Compile Go on Alpine Linux</a></li>
<li><a href="#git-with-alpine">Git with Alpine</a></li>
</ul>
</li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">

            
<p>Alpine Linux is a minimalist secure linux distro.</p>
<blockquote>
<p>In security terms less "footprint" often means less vectors of attack and less complexity to analyze for vulnerabilities</p>
</blockquote>
<p>Alpine Linux is becoming a preferred base OS for many foundational official Docker Images (python, php, ruby, nginx, redis, haproxy, go) since downloading many large Docker Images (aka Deploying Docker Containers) can saturate the network at scale.</p>
<ul>
<li><a href="http://www.pcworld.com/article/3031765/is-docker-ditching-ubuntu-linux-confusion-reigns.html">http://www.pcworld.com/article/3031765/is-docker-ditching-ubuntu-linux-confusion-reigns.html</a></li>
<li><a href="https://news.ycombinator.com/item?id=10998667">https://news.ycombinator.com/item?id=10998667</a></li>
<li><a href="https://en.wikipedia.org/wiki/Alpine_Linux">https://en.wikipedia.org/wiki/Alpine_Linux</a></li>
</ul>
<h3 id="getting-started-with-alpine-linux-in-docker">Getting started with Alpine Linux in Docker</h3>
<p>This will pull the latest alpine image (around 4MB) and run it in an ephemeral container.</p>
<p><code>sudo docker run -it --rm alpine /bin/sh</code></p>
<ul>
<li><a href="https://hub.docker.com/_/alpine/">https://hub.docker.com/_/alpine/</a></li>
</ul>
<h3 id="basics">Basics</h3>
<p>Most of the very basic commands are similar to other linux distros like Debian/Ubuntu/Redhat, but of course there are differences ;)</p>
<div class="highlight"><pre><span></span><code>ls -l /bin/sh
</code></pre></div>
<blockquote>
<p>/bin/busybox</p>
</blockquote>
<div class="highlight"><pre><span></span><code>cat /etc/passwd
less /etc/passwd
vi /etc/passwd
grep root /etc/passwd
ls -l /usr/bin /usr/sbin | more
</code></pre></div>
<blockquote>
<p>more busybox</p>
</blockquote>
<h3 id="package-management">Package Management</h3>
<div class="highlight"><pre><span></span><code>apk update
apk --help
</code></pre></div>
<blockquote>
<p>update the local index for all remote packages, list the options of the package manager</p>
</blockquote>
<div class="highlight"><pre><span></span><code>apk info
</code></pre></div>
<blockquote>
<p>list all of the packages installed locally</p>
</blockquote>
<div class="highlight"><pre><span></span><code>apk search curl
apk search curl | sort
apk info curl
apk add curl
</code></pre></div>
<blockquote>
<p>search the remote packages for a keyword (unsorted results), get info for a specific package, install a specific package</p>
</blockquote>
<ul>
<li><a href="http://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management">http://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management</a></li>
<li><a href="https://pkgs.alpinelinux.org/packages">https://pkgs.alpinelinux.org/packages</a></li>
</ul>
<h3 id="networking">Networking</h3>
<div class="highlight"><pre><span></span><code>hostname
cat /etc/resolv.conf
ifconfig
netstat -anp

traceroute
apk add iptables
</code></pre></div>
<h3 id="compiling-c-on-alpine-linux">Compiling C on Alpine Linux</h3>
<div class="highlight"><pre><span></span><code>apk add build-base gcc abuild binutils
</code></pre></div>
<p><em>This should probably be part of a Dockerfile rather than run every time in an ephemeral container</em></p>
<p><a href="https://wiki.alpinelinux.org/wiki/How_to_get_regular_stuff_working#Compiling_:_a_few_notes_and_a_reminder">https://wiki.alpinelinux.org/wiki/How_to_get_regular_stuff_working#Compiling_:_a_few_notes_and_a_reminder</a></p>
<p><code>vi hi.c</code></p>
<h4 id="hic">hi.c</h4>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">"hi"</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="compiling">compiling</h4>
<div class="highlight"><pre><span></span><code>apk add file
gcc -static hi.c
chmod +x a.out
file a.out
</code></pre></div>
<blockquote>
<p>The default is a.out: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, not stripped</p>
</blockquote>
<div class="highlight"><pre><span></span><code>./a.out
</code></pre></div>
<p><code>hi</code></p>
<blockquote>
<p>Note that this was just gcc not musl-gcc :(</p>
</blockquote>
<h4 id="incomplete-musl-compiler-on-alpine-linux">Incomplete musl compiler on alpine linux</h4>
<blockquote>
<p>WARNING: below did not work, TODO: <a href="https://bitbucket.org/GregorR/musl-cross">https://bitbucket.org/GregorR/musl-cross</a></p>
</blockquote>
<p>I suspect that I am overwriting the existing gcc toolchain and I need to specify a different prefix (/usr/local) </p>
<div class="highlight"><pre><span></span><code>apk update
apk add wget tar gzip gcc make
</code></pre></div>
<h1 id="apk-add-musl-dev-wget-tar-gzip-gcc-make">apk add musl-dev wget tar gzip gcc make</h1>
<div class="highlight"><pre><span></span><code>wget --no-check-certificate http://www.musl-libc.org/releases/musl-1.1.15.tar.gz
tar xf musl-1.1.15.tar.gz
cd musl-1.1.15
./configure
make install
</code></pre></div>
<blockquote>
<p>Now we've installed the musl compiler?</p>
</blockquote>
<p>/usr/local/musl seemed terribly empty of binaries (i.e. no /usr/local/musl/bin/)</p>
<ul>
<li><a href="https://www.musl-libc.org/faq.html">https://www.musl-libc.org/faq.html</a></li>
<li>
<p><a href="http://www.musl-libc.org/how.html">http://www.musl-libc.org/how.html</a></p>
<p>apk add alpine-sdk</p>
</li>
</ul>
<p>But maybe because it's already an alpine linux container the gcc already uses musl instead of libc and does not need the musl-gcc wrapper?</p>
<p><a href="http://www.guidesbyeric.com/statically-link-c-programs-with-musl-gcc">http://www.guidesbyeric.com/statically-link-c-programs-with-musl-gcc</a></p>
<h3 id="compile-go-on-alpine-linux">Compile Go on Alpine Linux</h3>
<p>Just use the golang image based on alpine linux ;)</p>
<p><a href="https://github.com/docker-library/docs/tree/master/golang">https://github.com/docker-library/docs/tree/master/golang</a></p>
<div class="highlight"><pre><span></span><code>docker pull golang:alpine
docker run -it --rm golang:alpine /bin/sh
</code></pre></div>
<blockquote>
<p>Now that we've got the container running we can use the shell</p>
</blockquote>
<p><code>vi intro.go</code></p>
<div class="highlight"><pre><span></span><code><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">"fmt"</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s2">"hi"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>To just run the source code <code>go run intro.go</code></p>
</blockquote>
<p><code>hi</code></p>
<div class="highlight"><pre><span></span><code>ls -l
go build intro.go
ls -l
./intro
</code></pre></div>
<p><code>hi</code></p>
<p>Maybe </p>
<p><a href="http://dominik.honnef.co/posts/2015/06/go-musl/">http://dominik.honnef.co/posts/2015/06/go-musl/</a> ?</p>
<h3 id="git-with-alpine">Git with Alpine</h3>
<div class="highlight"><pre><span></span><code>apk update
apk add --no-cache git
git --version
</code></pre></div>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="https://blog.john-pfeiffer.com/debian-packages-for-deployment-and-reprepro-for-a-local-apt-repository/" title="Previous: Debian Packages for Deployment and Reprepro for a local apt repository">Debian Packages for Deployment and Reprepro for a local apt repository</a></li>
 
                <li class="next_article"><a href="https://blog.john-pfeiffer.com/drupal-with-docker-compose-and-nginx-and-php-fpm-and-mariadb/" title="Next: Drupal with Docker Compose and nginx and php-fpm and mariadb">Drupal with Docker Compose and nginx and php-fpm and mariadb</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2016-02-28T21:19:00-08:00">Feb 28, 2016</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#linux-ref">linux</a> 
            <h4>~470 words</h4>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#alpine-ref">alpine
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#linux-ref">linux
                    <span>11</span>
</a></li>
                <li><a href="/tags.html#security-ref">security
                    <span>5</span>
</a></li>
            </ul>

        </div>
        </section>
</div>
</article>
				</div>
				<div class="span1"></div>
			</div>
		</div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>