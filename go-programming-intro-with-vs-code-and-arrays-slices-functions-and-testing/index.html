<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="john pfeiffer" />
        <meta name="copyright" content="john pfeiffer" />

<meta name="keywords" content="go, golang, vscode, testing, arrays, slices, binary search, programming, " />
        <title>Go Programming Intro with VS Code and Arrays Slices Functions and Testing  · johnpfeiffer
</title>
        <link href="https://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="https://blog.john-pfeiffer.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3758734-9']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    </head>
    <body>
	<div id="content-sans-footer">
        <div class="dropdown-backdrop">

			<div class="navbar navbar-static-top">
				<div class="navbar-inner">
					<div class="container">
						<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="https://blog.john-pfeiffer.com/"><span class=site-name>johnpfeiffer</span></a>
						<div class="nav-collapse collapse">
							<ul class="nav pull-right top-menu">
								<li ><a href="https://blog.john-pfeiffer.com">Home</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/john-likes/">John Likes</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/categories.html">Categories</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/tags.html">Tags</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/archives.html">Archives</a></li>
								<li><form class="navbar-search" action="https://blog.john-pfeiffer.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span1"></div>
				<div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="https://blog.john-pfeiffer.com/go-programming-intro-with-vs-code-and-arrays-slices-functions-and-testing/"> Go Programming Intro with VS Code and Arrays Slices Functions and Testing  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#prerequisites">Prerequisites</a><ul>
<li><a href="#download-and-install-the-go-language-compiler-and-tools">Download and install the go language compiler and tools</a><ul>
<li><a href="#vim-and-docker">vim and Docker</a></li>
</ul>
</li>
<li><a href="#installing-and-the-environment">Installing and the Environment</a></li>
<li><a href="#download-and-install-an-ide">Download and install an IDE</a></li>
<li><a href="#install-or-build-or-run">Install or Build or Run</a><ul>
<li><a href="#manual-cli-compilation-and-installation-and-execution">Manual CLI compilation and installation and execution</a></li>
</ul>
</li>
<li><a href="#debugging-with-delve">Debugging with Delve</a><ul>
<li><a href="#delve-debugging-and-running-your-application-with-f5-is-automatic-once-installed-correctly">Delve Debugging and running your application with F5 is automatic once installed correctly</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#coding-and-compiling">Coding and Compiling</a><ul>
<li><a href="#comments-types-strings-slices-for-loops">Comments Types Strings Slices For Loops</a><ul>
<li><a href="#introgo">intro.go</a></li>
</ul>
</li>
<li><a href="#arrays-are-contiguous-memory-and-4-bytes-is-normal">arrays are contiguous memory and 4 bytes is normal</a></li>
<li><a href="#fizzbuzz-and-switch">fizzbuzz and switch</a></li>
<li><a href="#time">time</a></li>
<li><a href="#packages-and-string-reverse">Packages and String Reverse</a><ul>
<li><a href="#main">main</a></li>
<li><a href="#package-mystringutil-with-reverse">package mystringutil with Reverse</a></li>
</ul>
</li>
<li><a href="#palindrome-and-string-conversion-integer-to-ascii">palindrome and string conversion integer to ascii</a></li>
<li><a href="#random-integers">Random Integers</a></li>
<li><a href="#binary-search">Binary Search</a></li>
<li><a href="#efficient-string-append-and-replacement">Efficient String append and replacement</a></li>
<li><a href="#testing-with-go">Testing with Go</a></li>
<li><a href="#a-simple-web-server">A simple web server</a><ul>
<li><a href="#deploying-a-go-web-application-to-google-appengine">Deploying a Go Web Application to Google AppEngine</a></li>
<li><a href="#to-deploy-to-google-app-engine">To deploy to Google App Engine</a></li>
</ul>
</li>
<li><a href="#handlerfunc-and-anonymous-functions-and-closure">HandlerFunc and Anonymous Functions and Closure</a></li>
<li><a href="#more-info">More Info</a></li>
</ul>
</li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">

            
<p>Introducing the Go Programming Language (aka golang) basics, interactive sandbox with <a href="http://play.golang.org">http://play.golang.org</a></p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Tooling is often essential to productivity.</p>
<h3 id="download-and-install-the-go-language-compiler-and-tools">Download and install the go language compiler and tools</h3>
<h4 id="vim-and-docker">vim and Docker</h4>
<p>Or alternatively just avoid the IDE and Environment and use vim and a docker container ;) <a href="https://hub.docker.com/_/golang/">https://hub.docker.com/_/golang/</a></p>
<h3 id="installing-and-the-environment">Installing and the Environment</h3>
<p><a href="https://golang.org/dl/">https://golang.org/dl/</a> and <code>cd /opt; tar xf go.tar.gz</code></p>
<p>Instead of the ephemeral <code>export PATH=$PATH:/usr/local/go/bin</code> I prefer the persistent ~/.profile (or for all users /etc/profile though clearly /opt indicates a single user system ;)</p>
<div class="highlight"><pre><span></span><span class="err">#</span><span class="x"> Go Programming</span>
<span class="x">export GOROOT=/opt/go</span>
<span class="x">export PATH=</span><span class="p">$</span><span class="nv">PATH</span><span class="x">:</span><span class="p">$</span><span class="nv">GOROOT</span><span class="x">/bin</span>
<span class="x">export GOPATH=/opt/goprojects</span>
<span class="x">export PATH=</span><span class="p">$</span><span class="nv">PATH</span><span class="x">:</span><span class="p">$</span><span class="nv">GOPATH</span><span class="x">/bin</span>

<span class="x">source ~/.profile</span>
</pre></div>
<blockquote>
<p>The last step gets you going without needing to reload your shell, full docs at <a href="https://golang.org/doc/install">https://golang.org/doc/install</a></p>
</blockquote>
<p><strong>WARNING</strong> be careful how you name your executables as the $GOPATH/bin will contain the names of the projects as binaries (so don't create a project or binary named bash!)</p>
<h3 id="download-and-install-an-ide">Download and install an IDE</h3>
<p>If you are used to larger projects then an IDE is quite helpful for colorization, auto completion, (right click or f12) goto definition, rename, build on save, auto formatting, etc.</p>
<p>Suprisingly one of the most popular and effective golang IDE combinations is: <a href="https://code.visualstudio.com/Docs/?dv=linux64_deb">https://code.visualstudio.com/Docs/?dv=linux64_deb</a></p>
<div class="highlight"><pre><span></span>dpkg -i vscode-amd64.deb
</pre></div>
<p>To install <a href="https://marketplace.visualstudio.com/items?itemName=lukehoban.Go">https://marketplace.visualstudio.com/items?itemName=lukehoban.Go</a> aka <a href="https://github.com/Microsoft/vscode-go">https://github.com/Microsoft/vscode-go</a> you actually:</p>
<ol>
<li>open Visual Studio Code</li>
<li>Control + P (Launches VS Code Quick Open)</li>
<li><code>ext install Go</code> (capital G for "lukehoban")</li>
<li>restart when prompted</li>
<li>File -&gt; Preferences -&gt; Color Theme (Light Visual Studio ;)</li>
</ol>
<blockquote>
<p>At this point you probably need to reboot to get VSCode to recognize the GOPATH correctly</p>
</blockquote>
<p>In your shell where you setup the GOPATH run the following to get all of the analysis tools that "Go for Visual Studio Code" uses, though it's a lot easier to just use the IDE in the bottom right corner "Analysis Tools Missing"</p>
<p>To take advantage of those tools (like gofmt on save), in your workspace (GOPATH) there will be a .vscode directory with settings.json <a href="https://code.visualstudio.com/docs/customization/userandworkspace">https://code.visualstudio.com/docs/customization/userandworkspace</a></p>
<div class="highlight"><pre><span></span>// Place your settings in this file to overwrite default and user settings.
{
    "go.buildOnSave": true,
    "go.lintOnSave": true,
    "go.vetOnSave": true,
    "go.buildFlags": [],
    "go.lintFlags": [],
    "go.vetFlags": [],
    "go.coverOnSave": false,
    "go.useCodeSnippetsOnFunctionSuggest": false,
    "go.formatOnSave": true,
    "go.formatTool": "goreturns"
}
</pre></div>
<blockquote>
<p>Just in case restart VSCode to recognize the updated settings</p>
</blockquote>
<p>Unfortunately it is not quite simple to execute the code directly in VSCode <a href="https://github.com/Microsoft/vscode-go/issues/21">https://github.com/Microsoft/vscode-go/issues/21</a></p>
<h3 id="install-or-build-or-run">Install or Build or Run</h3>
<p>Because Go is a static language there is a compilation (and linking) phase where the source code is transformed into a binary.</p>
<h4 id="manual-cli-compilation-and-installation-and-execution">Manual CLI compilation and installation and execution</h4>
<p>The traditional command line method is:</p>
<div class="highlight"><pre><span></span><span class="x">cd </span><span class="p">$</span><span class="nv">GOPATH</span><span class="x">/path-to-your-project/PROJECTNAME</span>
<span class="x">go install</span>
<span class="p">$</span><span class="nv">GOPATH</span><span class="x">/bin/PROJECTNAME</span>
</pre></div>
<ul>
<li><a href="https://golang.org/doc/code.html#Command">https://golang.org/doc/code.html#Command</a></li>
<li><a href="http://dave.cheney.net/2014/01/21/using-go-test-build-and-install">http://dave.cheney.net/2014/01/21/using-go-test-build-and-install</a></li>
</ul>
<p>A concrete example:</p>
<ol>
<li>Compile with: <code>cd /opt/goprojects/src/github.com/johnpfeiffer/intro/ ; go install</code></li>
<li>Execute with: <code>/opt/goprojects/bin/intro</code></li>
</ol>
<h3 id="debugging-with-delve">Debugging with Delve</h3>
<div class="highlight"><pre><span></span>go get github.com/derekparker/delve/cmd/dlv
cd /opt/goprojects/src
go install /derekparker/delve/cmd/dlv
</pre></div>
<p>The first time I attempted to do it manually:</p>
<div class="highlight"><pre><span></span>ls -ahl /opt/goprojects/bin/
cd /opt/goprojects/src/github.com/johnpfeiffer/YOURPROJECT
/opt/goprojects/bin/dlv  debug --headless --listen=:2345 --log
</pre></div>
<p>Now in the VSCode IDE open the project folder and create your helloworld.go source file and Control + S to save (and auto gofmt) and then press <strong>F5</strong> and it will connect to the Delve Debugger and display the output</p>
<h4 id="delve-debugging-and-running-your-application-with-f5-is-automatic-once-installed-correctly">Delve Debugging and running your application with F5 is automatic once installed correctly</h4>
<ol>
<li>The first time you run "Continue" with F5 on a file it will prompt you to setup your launch.json (and the IDE will open the default template for you)</li>
<li>Use the IDE to go back to your source .go file and press F5 again, this time since the .vscode subdirectory was created and the default delve launch.json file was created, it will just start in debug mode with the Debug Console output at the bottom</li>
</ol>
<h2 id="coding-and-compiling">Coding and Compiling</h2>
<p>For VSCode IDE keyboard shortcuts: <a href="https://code.visualstudio.com/docs/customization/keybindings">https://code.visualstudio.com/docs/customization/keybindings</a></p>
<h3 id="comments-types-strings-slices-for-loops">Comments Types Strings Slices For Loops</h3>
<p>The main package it where the execution begins (aka "main" in c <a href="https://en.wikipedia.org/wiki/Entry_point">https://en.wikipedia.org/wiki/Entry_point</a>)</p>
<p>Comments are either single line with double slashes or block comments <a href="https://golang.org/doc/effective_go.html#commentary">https://golang.org/doc/effective_go.html#commentary</a></p>
<h4 id="introgo">intro.go</h4>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">"fmt"</span>

<span class="cm">/* https://golang.org/doc/effective_go.html#mixed-caps</span>
<span class="cm">   https://golang.org/ref/spec#Constants */</span>
<span class="kd">const</span> <span class="nx">alphabetMax</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">26</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// while</span>
    <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="mi">4</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span>
        <span class="nx">j</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"break or return exits an infinite loop"</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="p">}</span>

    <span class="c1">// arrays are contiguous memory, fixed size and type</span>
    <span class="c1">// initialized to capacity 5 with values inserted, alternatively just initialized to empty with: var a [5]string</span>
    <span class="nx">a</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">,</span> <span class="s">"c"</span><span class="p">,</span> <span class="s">"d"</span><span class="p">,</span> <span class="s">"e"</span><span class="p">}</span>

    <span class="c1">// prefer Slices which are Reference Objects that wrap the underlying arrays</span>
    <span class="c1">// https://blog.golang.org/go-slices-usage-and-internals</span>
    <span class="nx">s</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span>

    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
    <span class="p">}</span>

    <span class="c1">// cleaner way of iterating over key and value</span>
    <span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">a</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>    <span class="c1">// []</span>
    <span class="nx">s</span> <span class="p">=</span> <span class="nx">a</span><span class="p">[:]</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>    <span class="c1">// [a b c d e]</span>
    <span class="nx">s</span> <span class="p">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>    <span class="c1">// [c d e]</span>
<span class="p">}</span>
</pre></div>
<h3 id="arrays-are-contiguous-memory-and-4-bytes-is-normal">arrays are contiguous memory and 4 bytes is normal</h3>
<div class="highlight"><pre><span></span><span class="c1">// int is usually the 4 byte int32 https://golang.org/ref/spec#Numeric_types</span>
<span class="nx">b</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
<span class="c1">// dereference the addresses that are holding the values 1 and 2</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">"%d %d\n"</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">&amp;</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c1">// rune is also int32</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">rune</span><span class="p">{</span><span class="sc">'a'</span><span class="p">,</span> <span class="sc">'ä'</span><span class="p">}</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">"%d %d\n"</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">&amp;</span><span class="nx">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
<h3 id="fizzbuzz-and-switch">fizzbuzz and switch</h3>
<p><a href="https://golang.org/ref/spec#Switch_statements">https://golang.org/ref/spec#Switch_statements</a></p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">16</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
    <span class="c1">// usually static case values and "switch i {" , note it will NOT fall through by default</span>
    <span class="k">switch</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">i</span><span class="o">%</span><span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"fizzbuzz"</span><span class="p">)</span>
    <span class="k">case</span> <span class="nx">i</span><span class="o">%</span><span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"fizz"</span><span class="p">)</span>
    <span class="k">case</span> <span class="nx">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"buzz"</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3 id="time">time</h3>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="s">"time"</span>
<span class="c1">// https://golang.org/pkg/time/#Now</span>
<span class="nx">now</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"local:"</span><span class="p">,</span> <span class="nx">now</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nx">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="mi">1000000</span><span class="p">,</span> <span class="s">"ms"</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"in UTC:"</span><span class="p">,</span> <span class="nx">now</span><span class="p">.</span><span class="nx">UTC</span><span class="p">().</span><span class="nx">Format</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">UnixDate</span><span class="p">))</span>
</pre></div>
<h3 id="packages-and-string-reverse">Packages and String Reverse</h3>
<p>When you modularize your code into packages then multiple programs can make use of DRY <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">https://en.wikipedia.org/wiki/Don%27t_repeat_yourself</a></p>
<h4 id="main">main</h4>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"github.com/johnpfeiffer/mystringutil"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="nx">stringutil</span><span class="p">.</span><span class="nx">Reverse</span><span class="p">(</span><span class="s">"!oG ,olleH"</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
<h4 id="package-mystringutil-with-reverse">package mystringutil with Reverse</h4>
<div class="highlight"><pre><span></span><span class="c1">// Package mystringutil contains utility functions for working with strings. "go build"</span>
<span class="kn">package</span> <span class="nx">mystringutil</span>

<span class="c1">// Reverse returns its argument string reversed rune-wise left to right.</span>
<span class="kd">func</span> <span class="nx">Reverse</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
        <span class="nx">r</span> <span class="o">:=</span> <span class="p">[]</span><span class="nb">rune</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
        <span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="p">=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span><span class="o">-</span><span class="mi">1</span> <span class="p">{</span>
                <span class="nx">r</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">r</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">r</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">r</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">string</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="palindrome-and-string-conversion-integer-to-ascii">palindrome and string conversion integer to ascii</h3>
<p>Besides the main function for executing you will obviously create re-usable packages which will contain functions.</p>
<p>Here is the source code for a simple "is this string a palindrome" and "is this integer a palindrome" programs:</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"strconv"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="s">"a"</span><span class="p">))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="s">"ala"</span><span class="p">))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="s">"noon"</span><span class="p">))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="s">"ab"</span><span class="p">))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="s">"racecar"</span><span class="p">))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="s">"abfooba"</span><span class="p">))</span>

    <span class="c1">// slower and uses extra memory</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="nx">strconv</span><span class="p">.</span><span class="nx">Itoa</span><span class="p">(</span><span class="mi">1991</span><span class="p">)))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">isPalindrome</span><span class="p">(</span><span class="nx">strconv</span><span class="p">.</span><span class="nx">Itoa</span><span class="p">(</span><span class="mi">1981</span><span class="p">)))</span>

    <span class="c1">// takes advantage of math (mindblown)</span>
    <span class="nx">number</span> <span class="o">:=</span> <span class="mi">9</span>
    <span class="nx">reversed</span> <span class="o">:=</span> <span class="nx">reverseInteger</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">reversed</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="s">"is a palindrome: "</span><span class="p">,</span> <span class="nx">number</span> <span class="o">==</span> <span class="nx">reversed</span><span class="p">)</span>
    <span class="nx">number</span> <span class="p">=</span> <span class="mi">123</span>
    <span class="nx">reversed</span> <span class="p">=</span> <span class="nx">reverseInteger</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">reversed</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="s">"is a palindrome: "</span><span class="p">,</span> <span class="nx">number</span> <span class="o">==</span> <span class="nx">reversed</span><span class="p">)</span>
    <span class="nx">number</span> <span class="p">=</span> <span class="mi">121</span>
    <span class="nx">reversed</span> <span class="p">=</span> <span class="nx">reverseInteger</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">reversed</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="s">"is a palindrome: "</span><span class="p">,</span> <span class="nx">number</span> <span class="o">==</span> <span class="nx">reversed</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">isPalindrome</span><span class="p">(</span><span class="nx">word</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">word</span> <span class="p">{</span>
        <span class="nx">oppositeIndex</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="o">-</span> <span class="nx">index</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="nx">opposite</span> <span class="o">:=</span> <span class="nb">rune</span><span class="p">(</span><span class="nx">word</span><span class="p">[</span><span class="nx">oppositeIndex</span><span class="p">])</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">"%d %T %c compared to %d %c \n"</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">oppositeIndex</span><span class="p">,</span> <span class="nx">opposite</span><span class="p">)</span>
        <span class="k">if</span> <span class="nx">index</span> <span class="o">&gt;=</span> <span class="nx">oppositeIndex</span> <span class="p">{</span>
            <span class="k">break</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nx">value</span> <span class="o">!=</span> <span class="nx">opposite</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span>
        <span class="p">}</span>

    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">reverseInteger</span><span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="nx">reversed</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="p">;</span> <span class="nx">x</span> <span class="p">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">x</span> <span class="o">/=</span> <span class="mi">10</span> <span class="p">{</span>
        <span class="nx">remainder</span> <span class="o">:=</span> <span class="nx">x</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="nx">reversed</span> <span class="p">=</span> <span class="p">(</span><span class="nx">reversed</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="nx">remainder</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">remainder</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">reversed</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">reversed</span>
<span class="p">}</span>
</pre></div>
<h3 id="random-integers">Random Integers</h3>
<div class="highlight"><pre><span></span><span class="c1">// https://golang.org/pkg/crypto/rand/</span>
<span class="c1">// https://golang.org/pkg/math/big/</span>
<span class="kd">var</span> <span class="nx">max</span> <span class="nx">big</span><span class="p">.</span><span class="nx">Int</span>
<span class="kd">var</span> <span class="nx">myRandom</span> <span class="o">*</span><span class="nx">big</span><span class="p">.</span><span class="nx">Int</span>
<span class="kd">var</span> <span class="nx">err</span> <span class="kt">error</span>
<span class="nx">max</span><span class="p">.</span><span class="nx">SetUint64</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nx">myRandom</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nx">Int</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nx">Reader</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">max</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">myRandom</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</pre></div>
<h3 id="binary-search">Binary Search</h3>
<p>Using main and print is the poor man's Unit Testing ;)</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"fmt"</span>
<span class="p">)</span>

<span class="c1">//todo pass by ref?</span>
<span class="kd">func</span> <span class="nx">binarySearch</span><span class="p">(</span><span class="nx">a</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">low</span><span class="p">,</span> <span class="nx">mid</span><span class="p">,</span> <span class="nx">high</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"low ="</span><span class="p">,</span> <span class="nx">low</span><span class="p">,</span> <span class="s">"mid ="</span><span class="p">,</span> <span class="nx">mid</span><span class="p">,</span> <span class="s">"high ="</span><span class="p">,</span> <span class="nx">high</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">a</span><span class="p">[</span><span class="nx">mid</span><span class="p">]</span> <span class="o">==</span> <span class="nx">target</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">mid</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nx">mid</span> <span class="o">&gt;=</span> <span class="nx">high</span> <span class="o">||</span> <span class="nx">mid</span> <span class="o">&lt;=</span> <span class="nx">low</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="nx">a</span><span class="p">[</span><span class="nx">mid</span><span class="p">]</span> <span class="p">&lt;</span> <span class="nx">target</span> <span class="p">{</span>
        <span class="nx">low</span> <span class="p">=</span> <span class="nx">mid</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nx">a</span><span class="p">[</span><span class="nx">mid</span><span class="p">]</span> <span class="p">&gt;</span> <span class="nx">target</span> <span class="p">{</span>
        <span class="nx">high</span> <span class="p">=</span> <span class="nx">mid</span>
    <span class="p">}</span>
    <span class="nx">mid</span> <span class="p">=</span> <span class="p">((</span><span class="nx">high</span> <span class="o">-</span> <span class="nx">low</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">low</span>
    <span class="k">return</span> <span class="nx">binarySearch</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">low</span><span class="p">,</span> <span class="nx">mid</span><span class="p">,</span> <span class="nx">high</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="nx">targets</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">}</span>
    <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">targets</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">:=</span> <span class="nx">binarySearch</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"found"</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="s">"at location"</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
<h3 id="efficient-string-append-and-replacement">Efficient String append and replacement</h3>
<p><a href="http://stackoverflow.com/questions/1760757/how-to-efficiently-concatenate-strings-in-go">http://stackoverflow.com/questions/1760757/how-to-efficiently-concatenate-strings-in-go</a></p>
<div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">myReplace</span><span class="p">(</span><span class="nx">source</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span>
    <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">source</span> <span class="p">{</span>
        <span class="k">if</span> <span class="nx">c</span> <span class="o">==</span> <span class="sc">' '</span> <span class="p">{</span>
            <span class="nx">b</span><span class="p">.</span><span class="nx">WriteString</span><span class="p">(</span><span class="s">"%20"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">b</span><span class="p">.</span><span class="nx">WriteString</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">String</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<h3 id="testing-with-go">Testing with Go</h3>
<ul>
<li><a href="https://golang.org/pkg/testing/">https://golang.org/pkg/testing/</a></li>
<li><a href="http://nathanleclaire.com/blog/2015/10/10/interfaces-and-composition-for-effective-unit-testing-in-golang/">http://nathanleclaire.com/blog/2015/10/10/interfaces-and-composition-for-effective-unit-testing-in-golang/</a></li>
<li><a href="https://cloud.google.com/appengine/docs/go/tools/localunittesting/#Go_Introducing_the_Go_testing_package">https://cloud.google.com/appengine/docs/go/tools/localunittesting/#Go_Introducing_the_Go_testing_package</a></li>
</ul>
<h3 id="a-simple-web-server">A simple web server</h3>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">myHandler</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">"hi"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">HandleFunc</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="nx">myHandler</span><span class="p">)</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">":8080"</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<p>Verify with <code>curl localhost:8080</code></p>
<h4 id="deploying-a-go-web-application-to-google-appengine">Deploying a Go Web Application to Google AppEngine</h4>
<p>First create an <strong>app.yaml</strong> file in your package</p>
<div class="highlight"><pre><span></span><span class="n">application</span><span class="o">:</span> <span class="n">MyApplicationName</span>
<span class="n">version</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">runtime</span><span class="o">:</span> <span class="n">go</span>
<span class="n">api_version</span><span class="o">:</span> <span class="n">go1</span>

<span class="n">handlers</span><span class="o">:</span>
<span class="o">-</span> <span class="n">url</span><span class="o">:</span> <span class="o">/.*</span>
  <span class="n">script</span><span class="o">:</span> <span class="n">_go_app</span>
</pre></div>
<p>Second adapt your source code to the Google App Engine entrypoint:</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">myapplicationname</span>
<span class="c1">// package main</span>

<span class="kn">import</span> <span class="p">(</span>
        <span class="s">"fmt"</span>
        <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">myHandler</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">"hi"</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// The App Engine PaaS provides its own main() that handles the Listening and Serving ;)</span>
<span class="c1">//func main() {</span>
<span class="kd">func</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">http</span><span class="p">.</span><span class="nx">HandleFunc</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="nx">myHandler</span><span class="p">)</span>
<span class="c1">//      http.ListenAndServe(":8080", nil)</span>
<span class="p">}</span>
</pre></div>
<p>Assuming you have created the project with <a href="https://console.cloud.google.com/">https://console.cloud.google.com/</a> and received a unique application id...</p>
<p>A prerequisite is to use the SDK if you want to test it locally: <a href="https://cloud.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go">https://cloud.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go</a></p>
<div class="highlight"><pre><span></span>unzip go_appengine_sdk...zip
/opt/go_appengine/goapp serve /path-to-project/MyProjectFolder/

  INFO     2016-06-02 06:30:27,493 devappserver2.py:769] Skipping SDK update check.
  INFO     2016-06-02 06:30:27,527 api_server.py:205] Starting API server at: http://localhost:38837
  INFO     2016-06-02 06:30:27,530 dispatcher.py:197] Starting module "default" running at: http://localhost:8080
  INFO     2016-06-02 06:30:27,531 admin_server.py:116] Starting admin server at: http://localhost:8000
</pre></div>
<h4 id="to-deploy-to-google-app-engine">To deploy to Google App Engine</h4>
<div class="highlight"><pre><span></span>/opt/go_appengine/appcfg.py -A MyApplicationID update ./MyProjectFolder/
</pre></div>
<blockquote>
<p>View the version deployed and stats with <a href="https://console.cloud.google.com/appengine/versions?project=MyApplicationId">https://console.cloud.google.com/appengine/versions?project=MyApplicationId</a></p>
</blockquote>
<div class="highlight"><pre><span></span>curl http://MyApplicationId.appspot.com/
</pre></div>
<blockquote>
<p>A gotcha is future updates deployed need the app.yaml version to increment AND either use the Web UI to set the new "default" or...</p>
</blockquote>
<div class="highlight"><pre><span></span>/opt/go_appengine/appcfg.py -A MyApplicationId set_default_version /MyProjectFolder
</pre></div>
<h3 id="handlerfunc-and-anonymous-functions-and-closure">HandlerFunc and Anonymous Functions and Closure</h3>
<p>The decorator pattern Anonymous functions an</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="cm">/* using an anonymous function and closure to wrap the HandlerFunc</span>
<span class="cm">https://golang.org/pkg/net/http/#HandlerFunc</span>
<span class="cm">https://medium.com/@matryer/the-http-handlerfunc-wrapper-technique-in-golang-c60bf76e6124</span>
<span class="cm">*/</span>
<span class="kd">func</span> <span class="nx">makeHandler</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// https://golang.org/src/net/http/request.go</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"serving: "</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">"&lt;h1&gt;%s&lt;/h1&gt;"</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"starting..."</span><span class="p">)</span>
    <span class="nx">indexHandler</span> <span class="o">:=</span> <span class="nx">makeHandler</span><span class="p">(</span><span class="s">"Index"</span><span class="p">)</span>
    <span class="nx">myHandler</span> <span class="o">:=</span> <span class="nx">makeHandler</span><span class="p">(</span><span class="s">"John"</span><span class="p">)</span>
    <span class="c1">// https://golang.org/pkg/net/http/#HandleFunc , string, func(ResponseWriter, *Request)</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">HandleFunc</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="nx">indexHandler</span><span class="p">)</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">HandleFunc</span><span class="p">(</span><span class="s">"/john"</span><span class="p">,</span> <span class="nx">myHandler</span><span class="p">)</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">":8080"</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<h3 id="more-info">More Info</h3>
<ul>
<li><a href="https://tour.golang.org/basics/">https://tour.golang.org/basics/</a></li>
<li><a href="https://blog.joshsoftware.com/2014/03/12/learn-to-build-and-deploy-simple-go-web-apps-part-one/">https://blog.joshsoftware.com/2014/03/12/learn-to-build-and-deploy-simple-go-web-apps-part-one/</a></li>
</ul>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="https://blog.john-pfeiffer.com/build-automation-using-packer-to-build-an-ami-use-immutable-not-chef/" title="Previous: Build Automation using packer to build an AMI use immutable not chef">Build Automation using packer to build an AMI use immutable not chef</a></li>
 
                <li class="next_article"><a href="https://blog.john-pfeiffer.com/static-site-with-bitbucket-and-shippable-and-pelican/" title="Next: Static site with Bitbucket and Shippable and Pelican">Static site with Bitbucket and Shippable and Pelican</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2015-11-15T21:19:00-08:00">Nov 15, 2015</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#programming-ref">programming</a> 
            <h4>~1536 words</h4>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#arrays-ref">arrays
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#binary-search-ref">binary search
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#go-ref">go
                    <span>5</span>
</a></li>
                <li><a href="/tags.html#golang-ref">golang
                    <span>4</span>
</a></li>
                <li><a href="/tags.html#slices-ref">slices
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#testing-ref">testing
                    <span>6</span>
</a></li>
                <li><a href="/tags.html#vscode-ref">vscode
                    <span>1</span>
</a></li>
            </ul>

        </div>
        </section>
</div>
</article>
				</div>
				<div class="span1"></div>
			</div>
		</div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>