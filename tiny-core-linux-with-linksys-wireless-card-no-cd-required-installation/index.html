<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="john pfeiffer" />
        <meta name="copyright" content="john pfeiffer" />

<meta name="keywords" content="linux, tiny core linux, linux, " />
        <title>Tiny Core Linux with Linksys Wireless Card - no CD required installation  · johnpfeiffer
</title>
        <!--link href="https://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css"-->
        <!--link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"-->
        <link href="https://blog.john-pfeiffer.com/theme/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="https://blog.john-pfeiffer.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
    </head>
    <body>
	<div id="content-sans-footer">
        <div class="dropdown-backdrop">

			<div class="navbar navbar-static-top">
				<div class="navbar-inner">
					<div class="container">
						<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="https://blog.john-pfeiffer.com/"><span class=site-name>johnpfeiffer</span></a>
						<div class="nav-collapse collapse">
							<ul class="nav pull-right top-menu">
								<li ><a href="https://blog.john-pfeiffer.com">Home</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/resources-for-engineering-people-managers/">Resources for Engineering (People) Managers</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/john-likes/">John Likes</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/software-engineer-favorites/">Software Engineer Favorites</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/categories.html">Categories</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/tags.html">Tags</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/archives.html">Archives</a></li>
								<li><form class="navbar-search" action="https://blog.john-pfeiffer.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span1"></div>
				<div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="https://blog.john-pfeiffer.com/tiny-core-linux-with-linksys-wireless-card-no-cd-required-installation/"> Tiny Core Linux with Linksys Wireless Card - no CD required installation  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#getting-the-pieces-ready">Getting the pieces ready</a></li>
<li><a href="#modify-your-grub-legacy-menu">Modify your Grub (legacy) menu</a></li>
<li><a href="#oh-wait-wifi-drivers">Oh Wait, Wifi Drivers!</a></li>
<li><a href="#booting-into-tiny-core-linux">Booting into Tiny Core Linux</a></li>
<li><a href="#verify-after-reboot">Verify after reboot</a></li>
<li><a href="#adding-a-browser-to-tiny-core-linux">Adding a browser to Tiny Core Linux</a></li>
<li><a href="#miscellaneous-tiny-core-linux-notes">Miscellaneous Tiny Core Linux Notes</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">

            
<p>Tiny Core Linux is fast and works great... but it does take some effort to get setup... </p>
<p>Here's how I got my Linksys wpc54g (v3) pci wireless card working with WPA - and I didn't burn a tiny core cd!</p>
<p>You can't repartition a hard drive while actually using it so you'll most likely need GParted (ie from SystemRescueCD bootable cd) so that you can repartition / (root) and resize to have a spare linux partition... AND use:</p>
<p><code>mke2fs -t ext3 /dev/hda3</code></p>
<blockquote>
<p>(or wherever it is...)
hda3 = third partition on the first hard drive, you may need to use <code>fdisk -l</code>
or Start -&gt; Control Panel -&gt; Administrative Tools -&gt; Computer Management -&gt; Disk Management</p>
</blockquote>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>grub bootloader installed (preferrably to the MBR)  </li>
<li>tinycore.iso (cd image of tiny core installation/live cd)  </li>
<li>uniextract or isobuster (to open files from iso's)  </li>
<li>ext2fsd (winxp application that allows copying files in/out of an ext2/ext3 partition)</li>
</ul>
<p><em>tcz</em> files from an FTP repository listed in the section "Install on a Hard Drive Without Being Connected to the Internet" from  <a href="http://wiki.tinycorelinux.net/wiki:start#installing">http://wiki.tinycorelinux.net/wiki:start#installing</a></p>
<ul>
<li>wireless-2.6.29.1-tinycore.tcz  </li>
<li>wireless_tools.tcz  </li>
<li>wpa_supplicant.tcz  </li>
<li>b43-fwcutter.tcz  </li>
<li>open-ssl-0.9.8m.tcz</li>
</ul>
<h3 id="getting-the-pieces-ready">Getting the pieces ready</h3>
<ol>
<li>Extract the files from the <strong>tinycore.iso</strong> (using IsoBuster or UniExtract)...<br/>
OR if you have linux: <code>mount -o loop /path-to-iso/image-filename.iso /mnt/custom</code></li>
<li>We only need the <strong>bzImage</strong> and <strong>tinycore.gz</strong> files... <blockquote>
<p>CAPITAL I ON THE bzImage!</p>
</blockquote>
</li>
<li>USING Ext2 Volume Manager (ext2fsd) ... browse to your linux partition and create the following folder: <strong>/boot/tinycore</strong></li>
<li>Copy the "bzimage" and "tinycore.gz" files into the linux partition <strong>/boot/tinycore folder</strong></li>
<li>Also create the following text file: <strong>/tce/onboot.lst</strong><div class="highlight"><pre><span></span><code><span class="n">wireless</span><span class="o">-</span><span class="mf">2.6</span><span class="o">.</span><span class="mf">29.1</span><span class="o">-</span><span class="n">tinycore</span><span class="o">.</span><span class="n">tcz</span>
<span class="n">wireless_tools</span><span class="o">.</span><span class="n">tcz</span>
<span class="n">b43</span><span class="o">-</span><span class="n">fwcutter</span><span class="o">.</span><span class="n">tcz</span>
<span class="n">openssl</span><span class="o">-</span><span class="mf">0.9</span><span class="o">.</span><span class="mi">8</span><span class="n">m</span><span class="o">.</span><span class="n">tcz</span>
<span class="n">wpa_supplicant</span><span class="o">.</span><span class="n">tcz</span>
<span class="n">nano</span><span class="o">.</span><span class="n">tcz</span>
</code></pre></div>
</li>
</ol>
<blockquote>
<p>BE CAREFUL TO NOT HAVE ANY MISSPELLINGS OR EXTRA SPACES</p>
</blockquote>
<p>Finally, create the directory /tce/optional and copy the above .tcz files into it.</p>
<p><em>TinyCore uses /tce/mydata.tgz to store your files in the /home and /opt directories. (Therefore you could sneak something in if you wanted to...?)</em></p>
<p><em>ALSO, it uses .ashrc (e.g. not BASH command prompt) so any aliases are in /tce/mydata.tgz -&gt; home/tc/.ashrc</em></p>
<h3 id="modify-your-grub-legacy-menu">Modify your Grub (legacy) menu</h3>
<p><strong>menu.lst</strong></p>
<div class="highlight"><pre><span></span><code>title tinycore  
root (hd0,2)  
kernel /boot/tinycore/bzimage  
initrd /boot/tinycore/tinycore.gz
</code></pre></div>
<h3 id="oh-wait-wifi-drivers">Oh Wait, Wifi Drivers!</h3>
<p>BUT my wifi depends on this Linksys wpc54g (v3) pci wireless card AND wpa encryption...</p>
<p>So I've got <strong>wl_apsta.o</strong> from my previous debian kernel 2.6.26 (with all of the linux-header and make and compiling commands to get that binary...)</p>
<p>Without the correct fw5 (b43 firmware) <code>dmesg</code> will contain:</p>
<div class="highlight"><pre><span></span><code>b43-phy0 ERROR: firmware file "b43/ucode5.fw"
</code></pre></div>
<blockquote>
<p>kernel firmware unhappy with wrong linksys driver</p>
</blockquote>
<p>COPY <strong>wl_apsta.o</strong> into <strong>/mnt/hda3/tce</strong> (with EXT2FSD or usb stick or whatever)</p>
<p><em>Rather than hack into my-data.tgz we'll wait until we've booted into Tiny Core...</em></p>
<h3 id="booting-into-tiny-core-linux">Booting into Tiny Core Linux</h3>
<p>BOOTING INTO TINY CORE IS VERY FAST... (fingers crossed about everything before)</p>
<p>Right Click -&gt; Control Panel or a funny icon in the middle with screwdriver = Control Panel</p>
<p>First check that our "onboot.lst" hack worked: Apps Audit -&gt; OnBoot -&gt; Maintenance</p>
<p><em>(could also use: nano /mnt/hda3/tce/onboot.lst)</em></p>
<p><strong>WHEN YOU CHOOSE TO SAVE/BACKUP</strong> (or when prompted when closing to Save a Backup)  </p>
<p><strong>mydata.tgz</strong> is created and it includes any modifications to <strong>/opt/bootlocal.sh</strong></p>
<p>since things put in the <strong>bootlocal.sh</strong> script are run as root... my wifi hack works...</p>
<p><code>nano bootlocal.sh</code></p>
<div class="highlight"><pre><span></span><code>mkdir /lib/firmware  
b43-fwcutter -w /lib/firmware /mnt/hda3/tce/wl_apsta.o  
wpa_supplicant -B -iwlan0 -c/mnt/hda3/tce/wpa_supplicant.conf  
udhcpc -H hostname -b -i wlan0
</code></pre></div>
<p>the /lib/firmware directory is necessary for the kernel to get the new drivers  </p>
<p>the b43-fwcutter firmware cutter gets the drivers to the directory  </p>
<p>wpa_supplicant starts in the background using wlan0 and the config file wpa_supplicant.conf</p>
<p><code>wpa_passphrase ssid-network-name &gt; wpa_supplicant.conf</code></p>
<blockquote>
<p>prompts for the wireless network password, after you type it in press enter</p>
</blockquote>
<p>udhcpc is busybox's dhcp client using "hostname", in the background on wlan0</p>
<p>An alternative configuration in bootlocal.sh for a static ip would be...</p>
<div class="highlight"><pre><span></span><code>ifconfig wlan0 10.0.0.99 netmask 255.255.255.0 up  
route add default gw 10.0.0.138  
echo "nameserver 10.0.0.138" &gt; /etc/resolv.conf
</code></pre></div>
<h3 id="verify-after-reboot">Verify after reboot</h3>
<p>AFTER I REBOOTED ifconfig wlan0 //shows me my ip address  </p>
<p><code>ping 10.0.0.138</code> and <code>ping http://kittyandbear.net</code></p>
<blockquote>
<p>ALL OK!</p>
</blockquote>
<h3 id="adding-a-browser-to-tiny-core-linux">Adding a browser to Tiny Core Linux</h3>
<p>Of course, now I have to install a browser...</p>
<p>Since tinycore works from the core image and with then added modifications to be as lean and fast as possible you really need to explicitly choose what you want on your hard drive AND what you want started at boot time.</p>
<ol>
<li>Right Click -&gt; AppsBrowser or funny icon on the bottom right (gears)</li>
<li>File -&gt; Install Local Extension (anything on your hard drive but not in onboot.lst)  </li>
<li>By default it lists your TCE/optional directory, double click on the one you want...
(If it isn't onboot and it isn't "installed" by above then it's not on your tinycore yet!)</li>
</ol>
<p>OR File -&gt; AppsBrowser ... when you choose to install something from the "repository" be prepared to wait for about 5 minutes for it to load the hundreds of packages...</p>
<h3 id="miscellaneous-tiny-core-linux-notes">Miscellaneous Tiny Core Linux Notes</h3>
<p>Right Click -&gt; Shells -&gt; Shell Dark or funny icon on the bottom left (terminal with prompt)</p>
<p>Right Click -&gt; Control Panel -&gt; System Stats OR funny icon in the middle with screwdriver = Panel -&gt; System Stats</p>
<p>dmesg TAB shows you the b43 stuff  </p>
<p>cpu is cpu type  </p>
<p>mem is RAM free  </p>
<p>net is network devices installed...</p>
<p>loadkmap &lt; /usr/share/kmap/uk.kmap</p>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="https://blog.john-pfeiffer.com/electric-car-rebate-why-not-go-european/" title="Previous: Electric Car Rebate... Why not go European?">Electric Car Rebate... Why not go European?</a></li>
 
                <li class="next_article"><a href="https://blog.john-pfeiffer.com/css-3-column-liquid-layout-example/" title="Next: CSS 3 column liquid layout example">CSS 3 column liquid layout example</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2010-08-04T01:52:00-07:00">Aug 4, 2010</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#linux-ref">linux</a> 
            <h4>~846 words</h4>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#linux-ref">linux
                    <span>11</span>
</a></li>
                <li><a href="/tags.html#tiny-core-linux-ref">tiny core linux
                    <span>1</span>
</a></li>
            </ul>

        </div>
        </section>
</div>
</article>
				</div>
				<div class="span1"></div>
			</div>
		</div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>