<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="john pfeiffer" />
        <meta name="copyright" content="john pfeiffer" />

<meta name="keywords" content="programming, google app engine, python, webapp2, programming, " />
        <title>Google App Engine Python  · johnpfeiffer
</title>
        <link href="https://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://blog.john-pfeiffer.com/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="https://blog.john-pfeiffer.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="https://blog.john-pfeiffer.com/theme/images/apple-touch-icon-144x144.png" />
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3758734-9']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    </head>
    <body>
	<div id="content-sans-footer">
        <div class="dropdown-backdrop">

			<div class="navbar navbar-static-top">
				<div class="navbar-inner">
					<div class="container">
						<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="https://blog.john-pfeiffer.com/"><span class=site-name>johnpfeiffer</span></a>
						<div class="nav-collapse collapse">
							<ul class="nav pull-right top-menu">
								<li ><a href="https://blog.john-pfeiffer.com">Home</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/john-likes/">John Likes</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/categories.html">Categories</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/tags.html">Tags</a></li>
								<li ><a href="https://blog.john-pfeiffer.com/archives.html">Archives</a></li>
								<li><form class="navbar-search" action="https://blog.john-pfeiffer.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span1"></div>
				<div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="https://blog.john-pfeiffer.com/google-app-engine-python/"> Google App Engine Python  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc">
<ul>
<li><a href="#helloworldappyaml">helloworld/app.yaml</a></li>
<li><a href="#helloworldmainpy">helloworld/main.py</a></li>
<li><a href="#view-the-app-on-your-local-machine">View the app on your local machine</a></li>
<li><a href="#upload-the-app-to-google-app-engine">Upload the app to Google App Engine</a></li>
<li><a href="#appyaml">app.yaml</a></li>
<li><a href="#mainpy">main.py</a></li>
<li><a href="#update-the-code-in-the-cloud">Update the code in the cloud</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">

            
<p>Sign up for Google App Engine (gmail + SMS verification)</p>
<p>"Google App Engine (often referred to as GAE or simply App Engine, and also used by the acronym GAE/J) is a platform as a service (PaaS) cloud computing platform for developing and hosting web applications in Google-managed data centers."</p>
<p>Login and create an Application (e.g. named john-pfeiffer reachable at <a href="http://john-pfeiffer.appspot.com">http://john-pfeiffer.appspot.com</a>)</p>
<p>Download and extract the SDK (e.g. gae-python.zip)</p>
<p><code>cd google_appengine</code></p>
<p><code>cp -a new_project_template helloworld</code></p>
<h2 id="helloworldappyaml">helloworld/app.yaml</h2>
<div class="highlight"><pre><span></span><span class="n">application</span><span class="o">:</span> <span class="n">john</span><span class="o">-</span><span class="n">pfeiffer</span>  
<span class="n">version</span><span class="o">:</span> <span class="mi">1</span>  
<span class="n">runtime</span><span class="o">:</span> <span class="n">python27</span>  
<span class="n">api_version</span><span class="o">:</span> <span class="mi">1</span>  
<span class="n">threadsafe</span><span class="o">:</span> <span class="n">yes</span>

<span class="n">handlers</span><span class="o">:</span>
<span class="o">-</span> <span class="n">url</span><span class="o">:</span> <span class="o">/</span><span class="n">favicon</span><span class="o">.</span><span class="na">ico</span>
<span class="n">static_files</span><span class="o">:</span> <span class="n">favicon</span><span class="o">.</span><span class="na">ico</span>
<span class="n">upload</span><span class="o">:</span> <span class="n">favicon</span><span class="o">.</span><span class="na">ico</span>
<span class="o">-</span> <span class="n">url</span><span class="o">:</span> <span class="o">/.*</span>
<span class="n">script</span><span class="o">:</span> <span class="n">main</span><span class="o">.</span><span class="na">app</span>

<span class="n">libraries</span><span class="o">:</span>
<span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">webapp2</span>
<span class="n">version</span><span class="o">:</span> <span class="s2">"2.5.2"</span>
</pre></div>
<h2 id="helloworldmainpy">helloworld/main.py</h2>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">webapp2</span>

<span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'Hi World!'</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">webapp2</span><span class="o">.</span><span class="n">WSGIApplication</span><span class="p">([(</span><span class="s1">'/'</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">)],</span> <span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
<h2 id="view-the-app-on-your-local-machine">View the app on your local machine</h2>
<p><code>./dev_appserver.py helloworld</code></p>
<p>INFO 2012-12-27 04:20:20,399 dev_appserver_multiprocess.py:655]
Running application dev\~john-pfeiffer on port 8080:
http://localhost:8080</p>
<p>INFO 2012-12-27 04:20:20,399 dev_appserver_multiprocess.py:657] Admin console is available at: http://localhost:8080/_ah/admin</p>
<h2 id="upload-the-app-to-google-app-engine">Upload the app to Google App Engine</h2>
<p><code>./appcfg.py update helloworld/</code></p>
<div class="highlight"><pre><span></span><span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Host</span><span class="o">:</span> <span class="n">appengine</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">com</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Application</span><span class="o">:</span> <span class="n">john</span><span class="o">-</span><span class="n">pfeiffer</span><span class="o">;</span> <span class="n">version</span><span class="o">:</span> <span class="mi">1</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Starting</span> <span class="n">update</span> <span class="n">of</span> <span class="n">app</span><span class="o">:</span> <span class="n">john</span><span class="o">-</span><span class="n">pfeiffer</span><span class="o">,</span> <span class="n">version</span><span class="o">:</span> <span class="mi">1</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Getting</span> <span class="n">current</span> <span class="n">resource</span> <span class="n">limits</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Scanning</span> <span class="n">files</span> <span class="n">on</span> <span class="n">local</span> <span class="n">disk</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Cloning</span> <span class="mi">1</span> <span class="kd">static</span> <span class="n">file</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Cloning</span> <span class="mi">3</span> <span class="n">application</span> <span class="n">files</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Uploading</span> <span class="mi">1</span> <span class="n">files</span> <span class="n">and</span> <span class="n">blobs</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Uploaded</span> <span class="mi">1</span> <span class="n">files</span> <span class="n">and</span> <span class="n">blobs</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Compilation</span> <span class="n">starting</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Compilation</span> <span class="n">completed</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">44</span> <span class="n">PM</span> <span class="n">Starting</span> <span class="n">deployment</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">45</span> <span class="n">PM</span> <span class="n">Checking</span> <span class="k">if</span> <span class="n">deployment</span> <span class="n">succeeded</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">45</span> <span class="n">PM</span> <span class="n">Will</span> <span class="n">check</span> <span class="n">again</span> <span class="k">in</span> <span class="mi">1</span> <span class="n">seconds</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">45</span> <span class="n">PM</span> <span class="n">Checking</span> <span class="k">if</span> <span class="n">deployment</span> <span class="n">succeeded</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">45</span> <span class="n">PM</span> <span class="n">Will</span> <span class="n">check</span> <span class="n">again</span> <span class="k">in</span> <span class="mi">2</span> <span class="n">seconds</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">45</span> <span class="n">PM</span> <span class="n">Checking</span> <span class="k">if</span> <span class="n">deployment</span> <span class="n">succeeded</span><span class="o">.</span>  
<span class="mi">07</span><span class="o">:</span><span class="mi">45</span> <span class="n">PM</span> <span class="n">Deployment</span> <span class="n">successful</span><span class="o">.</span>
</pre></div>
<p><a href="http://john-pfeiffer.appspot.com">http://john-pfeiffer.appspot.com</a></p>
<p><code>appcfg.py download_app -A -V</code></p>
<h2 id="appyaml">app.yaml</h2>
<div class="highlight"><pre><span></span><span class="n">application</span><span class="o">:</span> <span class="n">john</span><span class="o">-</span><span class="n">pfeiffer</span>
<span class="n">version</span><span class="o">:</span> <span class="mi">6</span>
<span class="n">runtime</span><span class="o">:</span> <span class="n">python27</span>
<span class="n">api_version</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">threadsafe</span><span class="o">:</span> <span class="n">yes</span>

<span class="n">handlers</span><span class="o">:</span>  
<span class="o">-</span> <span class="n">url</span><span class="o">:</span> <span class="o">/</span><span class="n">favicon</span><span class="o">.</span><span class="na">ico</span>
<span class="n">static_files</span><span class="o">:</span> <span class="n">favicon</span><span class="o">.</span><span class="na">ico</span>
<span class="n">upload</span><span class="o">:</span> <span class="n">favicon</span><span class="o">.</span><span class="na">ico</span>

<span class="o">-</span> <span class="n">url</span><span class="o">:</span> <span class="o">/.*</span>
<span class="n">script</span><span class="o">:</span> <span class="n">main</span><span class="o">.</span><span class="na">app</span>

<span class="n">libraries</span><span class="o">:</span>  
<span class="o">-</span> <span class="n">name</span><span class="o">:</span> <span class="n">webapp2</span>
<span class="n">version</span><span class="o">:</span> <span class="s2">"2.5.2"</span>
</pre></div>
<h2 id="mainpy">main.py</h2>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">webapp2</span>

<span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'hello John Pfeiffer!'</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">PageOne</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">            PageOne</span>
<span class="s2">        """</span><span class="p">);</span>

<span class="k">class</span> <span class="nc">PageTwo</span><span class="p">(</span><span class="n">webapp2</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'PageTwo'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">get_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span>
        <span class="n">post_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">get_values</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">post_values</span><span class="p">))</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">webapp2</span><span class="o">.</span><span class="n">WSGIApplication</span><span class="p">([</span>  
        <span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">'/page-one'</span><span class="p">,</span> <span class="n">PageOne</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">'/page-two'</span><span class="p">,</span> <span class="n">PageTwo</span><span class="p">)</span>
    <span class="p">],</span> <span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>  
    <span class="n">run_wsgi_app</span><span class="p">(</span><span class="n">application</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>  
    <span class="n">main</span><span class="p">()</span>
</pre></div>
<h2 id="update-the-code-in-the-cloud">Update the code in the cloud</h2>
<p><code>./appcfg.py update john-pfeiffer</code></p>
<blockquote>
<p>update does not publish the new version yet</p>
</blockquote>
<p><code>./appcfg.py set_default_version john-pfeiffer</code></p>
<blockquote>
<p>or you can use the WebUI dashboard to change the default or delete a Version for an Application Instance</p>
</blockquote>
<p><a href="https://cloud.google.com/appengine/docs/python/config/appconfig">https://cloud.google.com/appengine/docs/python/config/appconfig</a></p>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="https://blog.john-pfeiffer.com/server-operations-cloud-versus-build-your-own/" title="Previous: Server Operations: Cloud versus Build Your Own">Server Operations: Cloud versus Build Your Own</a></li>
 
                <li class="next_article"><a href="https://blog.john-pfeiffer.com/fix-byobu-infinite-scroll-bug-on-ubuntu-1204-precise-pangolin/" title="Next: Fix Byobu infinite scroll bug on Ubuntu 12.04 Precise Pangolin">Fix Byobu infinite scroll bug on Ubuntu 12.04 Precise Pangolin</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2013-01-26T15:01:00-08:00">Jan 26, 2013</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#programming-ref">programming</a> 
            <h4>~379 words</h4>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#google-app-engine-ref">google app engine
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#programming-ref">programming
                    <span>6</span>
</a></li>
                <li><a href="/tags.html#python-ref">python
                    <span>9</span>
</a></li>
                <li><a href="/tags.html#webapp2-ref">webapp2
                    <span>2</span>
</a></li>
            </ul>

        </div>
        </section>
</div>
</article>
				</div>
				<div class="span1"></div>
			</div>
		</div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
    </ul>
</div>
</footer>            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>